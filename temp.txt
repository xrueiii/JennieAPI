src/
â”œâ”€â”€ extension.ts               # ğŸ”Œ å…¥å£é»ï¼Œè² è²¬å•Ÿç”¨æ’ä»¶ã€è¨»å†Šå‘½ä»¤èˆ‡äº‹ä»¶
â”œâ”€â”€ commands/
â”‚   â”œâ”€â”€ generateApiJson.ts     # ğŸ“¦ æƒæè³‡æ–™å¤¾ç”¢ç”Ÿ api.json çš„é‚è¼¯
â”‚   â”œâ”€â”€ suggestApiEndpoint.ts  # ğŸ’¡ å»ºè­° API endpoint ä¸¦æ’å…¥ fetch code
â”‚   â””â”€â”€ testCommand.ts         # ğŸ§ª æ¸¬è©¦ç”¨å‘½ä»¤
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ openai.ts              # ğŸ§  å°è£å‘¼å« Azure OpenAI çš„é‚è¼¯
â”‚   â”œâ”€â”€ apiDocs.ts             # ğŸ“š è®€å–èˆ‡è§£æ api.json çš„é‚è¼¯
â”‚   â””â”€â”€ apiUtils.ts            # ğŸ” é—œéµå­—èƒå–ã€ç›¸ä¼¼åº¦è¨ˆç®—ã€API åˆ†æç­‰
â”œâ”€â”€ ui/
â”‚   â””â”€â”€ webview.ts             # ğŸ–¼ï¸ WebView é¢æ¿ HTML çš„è¼‰å…¥èˆ‡è™•ç†
â”œâ”€â”€ codegen/
â”‚   â”œâ”€â”€ fetchSnippet.ts        # ğŸ§© æ ¹æ“š API æ–‡ä»¶ç”¢ç”Ÿ fetch snippet
â”‚   â””â”€â”€ refineCode.ts          # ğŸ”§ å‘¼å« LLM å„ªåŒ–ç”Ÿæˆçš„ code snippet
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts               # ğŸ§¾ Message, ApiDoc, ApiEndpoint ç­‰å‹åˆ¥å®šç¾©
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ file.ts                # ğŸ“‚ è®€æª”ã€è·¯å¾‘æ‹¼æ¥ã€éè¿´æœå°‹ç­‰ç­‰å·¥å…·
media/
icon/
package.json
tsconfig.json
.vscodeignore



async function generateResponse(prompt: string): Promise<string> {
  if (!url || !apiKey) {
    vscode.window.showErrorMessage("âŒ Missing AZURE_OPENAI_FULL_URL or AZURE_OPENAI_API_KEY in .env");
    return "Environment variables missing.";
  }

  const headers = {
    "Content-Type": "application/json",
    "api-key": apiKey
  };

  const messages: Message[] = [
    { role: "system", content: "You are a helpful assistant." },
    { role: "user", content: prompt }
  ];

  const requestBody = {
    messages,
    max_tokens: 5000,
    temperature: 1,
    top_p: 1
  };

  try {
    const response = await fetch(url, {
      method: "POST",
      headers,
      body: JSON.stringify(requestBody)
    });

    const data = (await response.json()) as any;

    if (!response.ok) {
      vscode.window.showErrorMessage(`âš ï¸ Azure API Error: ${data.error?.message || 'Unknown error'}`);
      return "API error.";
    }

    const content = data.choices?.[0]?.message?.content;
    return content || "âš ï¸ No message content.";
  } catch (err: any) {
    console.error("âŒ Azure call failed:", err);
    vscode.window.showErrorMessage("âŒ Error calling Azure API: " + err.message);
    return "âŒ API call failed.";
  }
}